% import board

<html>
<head>
    <title>Four in a row</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
    <style>
        img {
            width: {{size}}px;
            height: {{size}}px;
        }
        table {
            border: 10px blue;
            border-spacing: 0px;
        }
        td {
            border: none;
            margin: 0px;
            padding: 0px;
        }
        button {
            border: none;
            outline: none;
            display: inline-block;
            padding: 0px;
            margin: 0px;
            background-color: rgba(24, 117, 248, 0);
        }
        button:active {
            border: none;
        }
    </style>
</head>

<body>

    <div class="container" style="margin: 30;">
    <div class="columns">

        <div class="column is-one-quarter">
            <div class="tile is-ancestor">
                <div class="tile is-vertical is-parent">
                    <div class="tile is-child box">
                        <p class="title">Navigation</p>
                        <form action="/back/" method="POST">
                            <button class="button is-fullwidth is-info"><strong>Back</strong></button>
                        </form>
                        <form action="/reset/" method="POST">
                            <button class="button is-fullwidth is-light">Reset game</button>
                        </form>
                        <form action="/undo/" method="POST">
                            <button class="button is-fullwidth is-light">Undo</button>
                        </form>
                    </div>
                    <div class="tile is-child box">
                        <p class="title">Score</p>
                        <p style="text-align:center" class="is-size-1">
                            <strong class="has-text-danger">1</strong>
                            <strong> : </strong>
                            <strong class="has-text-warning">3</strong>
                        </p>
                    </div>

                    <div class="tile is-child box">
                        <p style="text-align:center">
                        % state = game.grid.outcome()
                        % if state == board.inProgress:
                            % color = game.grid.turns % 2
                            % if color == board.red:
                                <strong class="has-text-danger">red's turn</strong>
                            % else:
                                <strong class="has-text-warning">yellow's turn</strong>
                            % end
                        % elif state == board.draw:
                            <strong class="is-size-3">Draw</strong>
                        % elif state == board.red:
                            <strong class="has-text-danger is-size-3">red wins</strong>
                        % elif state == board.blue:
                            <strong class="has-text-warning is-size-3">yellow wins</strong>
                        % end
                        </p>
                    </div>

                </div>
            </div>
        </div>

        <div class="column">
            <div class="container" style="width: {{grid_width}};">
                <table>
                    % for j in range(game.width):
                    <td>
                        <form action="/play/{{j}}" method="GET">
                            <button name="play" style="width: {{size}}px; height: {{size}}px;">
                                %#<img src="https://www.transparenttextures.com/patterns/asfalt-light.png" alt="board">
                            </button>
                        </form>
                    </td>
                    % end
        
                    % for i in range(game.height):
                    <tr>
                        % for j in range(game.width):
                        <td>
                            % token = game.grid.board[j][game.height - 1 - i]
                            % if token == 0:
                            <img src="../img/token1.png">
                            % elif token == 1:
                            <img src="../img/token2.png">
                            % else:
                            <img src="../img/board.png">
                            % end
                        </td>
                        % end
                    </tr>
                    % end
                </table>
            </div>
        </div>

    </div>
    </div>
</body>

</html>